\begin{algorithm*}[!ht]
  \caption{Tree Specific Operations}\label{alg:tree_op}% \vincent{Replace unit-read by read, then remove all tx read/write.}}
\algtechrep
  \begin{algorithmic}[1]
   \begin{multicols}{3}
   {\size 
   		\Part{Additional fields of node $n$}{
			\State $\ms{node}$ a record additional with fields: 
			\State \T $\ms{left-h}, \ms{right-h} \in \mathbb{N}$, local height of 
			\State \T\T left/right child, initially 0
			\State \T $\ms{\ell}, \ms{r} \in \mathbb{N}$, left/right child pointers,
			\State \T\T initially $\bot$
			\State \T $\ms{local-h} \in \mathbb{N}$, expected local height,
			\State \T\T initially 1
   		}\EndPart
   	
%		\Statex   	
%		
%		\Part{State of shared memory $s$}{
%			\State $\ms{root}$ shared pointer to root 
%   		}\EndPart
		
		\Statex
		
		\Part{State of structure $s$}{
			\State $\ms{root}$, pointer to root 
			%\State $\ms{curr}$, a pointer to a node used while traversing the tree
			%\State $\ms{\ell}, \ms{r}$, pointers to left/right children 
			%\State $\ms{lefth}, \ms{righth}, \ms{left-localh}, \ms{right-localh}, \ms{localh}  \in \mathbb{N}$
			%\State $\ms{bal} \in \mathbb{N}$, the imbalance level
		}\EndPart
		
		\newpage

   		\Part{$\act{get-first}()_s$}{

			\Return $\ms{root}$ \EndReturn
   		}\EndPart



		\Statex
   	
		\Part{$\act{get-next}(\ms{node}, \ms{k})_s$}{

			\State $\ms{rem} \gets \ms{node.rem}$
			\If{$\ms{node.k > k} \cup \ms{rem = by-left-rot}$}
				\State $\ms{next} \gets \ms{node.right}$
			\Else{}
				\State $\ms{next} \gets \ms{node.left}$
			\EndIf
			\If{$\ms{next = \bot} \cap \neg \ms{rem}$}
				\If{$\ms{node.k > k}$}
					\Return $\ms{node.left}$ \EndReturn
				\Else
					\Return $\ms{node.right}$ \EndReturn
				\EndIf
			\EndIf
			\Return $\ms{next}$ \EndReturn
		}\EndPart

		\newpage

   		\Part{$\act{validate}(\ms{node}, \ms{k})_s$}{

			\If{$\ms{node.rem}$}
				\Return $\lit{false}$ \EndReturn
			\EndIf
			\If{$\ms{node.next.key > k}$}
				\State $\ms{next} \gets \ms{node.right}$
			\Else{}
				\State $\ms{next} \gets \ms{node.left}$
			\EndIf
			\If{$\ms{next = \bot}$}
				\Return $\lit{true}$ \EndReturn
			\EndIf
			\Return $\lit{false}$ \EndReturn
   		}\EndPart
		
		\Statex

   		\Part{$\act{add}(\ms{node}, \ms{k})_s$}{

			\State \Comment{allocate a node called new}
			\State $\ms{new.key} \gets \ms{k}$
			\If{$\ms{node.k > k}$}
				\State $\ms{node.right} \gets \ms{new}$
			\Else{}
				\State $\ms{node.left} \gets \ms{new}$
			\EndIf
   		}\EndPart


		\Statex
   	

				


	}
    \end{multicols}
  \end{algorithmic}
\algtechrepend
\end{algorithm*}
